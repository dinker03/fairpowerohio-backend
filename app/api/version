// app/api/version/route.ts

export async function GET() {
  const payload = {
    env: process.env.VERCEL_ENV || "unknown",            // "production" | "preview" | "development"
    sha: process.env.VERCEL_GIT_COMMIT_SHA || "unknown", // short/long SHA
    ref: process.env.VERCEL_GIT_COMMIT_REF || "unknown", // branch
    msg: process.env.VERCEL_GIT_COMMIT_MESSAGE || "",
    deployedAt: new Date().toISOString()
  };

  return new Response(JSON.stringify(payload), {
    status: 200,
    headers: {
      "content-type": "application/json; charset=utf-8",
      "cache-control": "public, max-age=0, s-maxage=60" // 1 min CDN cache, fine for diagnostics
    }
  });
}
